PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX skos: <http://www.w3.org/2004/02/skos/core#>
PREFIX qb: <http://purl.org/linked-data/cube#>
PREFIX ex: <http://example.org/>
PREFIX sh: <http://www.w3.org/ns/shacl#>
PREFIX ssz-schema: <http://ld.stadt-zuerich.ch/schema/>
PREFIX ssz-dimension: <http://ld.stadt-zuerich.ch/statistics/property/>

INSERT {
    ?sliceKey a ssz-schema:DefaultSliceKey ;
        sh:shapesGraph ?shape .

}
 WHERE {

        ?dataset a qb:DataSet ;
           skos:notation ?datasetNotation ;
            qb:slice/qb:sliceStructure ?sliceKey .

        BIND(URI(REPLACE("http://stat.stadt-zuerich.ch/api/dataset/%%DATASET%%/slice", "%%DATASET%%" , ?datasetNotation)) AS ?target)

        ?shape a sh:NodeShape ;
            sh:targetNode ?target .

}